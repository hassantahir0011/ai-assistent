<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">

<link rel="stylesheet" type="text/css" href="rich-textarea-style.css">



</head>
<body>

<div class="input-field-selection-textarea RICH_TEXTAREA" contenteditable="true">​​​​{o=tag1}​​{o=tag3}​​{o=tag5}​das asdsad AWDAS asd how are you? ​{o=tag2}​​</div>
<textarea rows="4" cols="50">asdas</textarea>
<div class="input-field-selection-textarea RICH_TEXTAREA" id="RICH_TEXTAREA" contenteditable="true">​​​​{o=tag1}​​{o=tag3}​​{o=tag5}​das asdsad AWDAS asd how are you? ​{o=tag2}​​</div>
<textarea ></textarea>

<br>
<div class="get-values">
    <button id="button">Generate Text</button>
    <br>

    <textarea class="output" id="output"></textarea>
</div>

<script src="https://code.jquery.com/jquery-1.12.4.js"></script>
<script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>
<script src="jquery.ui.autocomplete.html.js" type="text/javascript"></script>
<!--<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-autocomplete/1.0.7/jquery.auto-complete.min.js" type="text/javascript"></script>-->
<script type="text/javascript" src="rich_textarea.js"></script>
<!-- <script src="https://miles-by-motorcycle.com/static/rich_textarea/jquery.rich_textarea.js" type="text/javascript"></script> -->

<script type="text/javascript">

	// include ddt.js above and uncomment this to turn on debugging trace messages.
	// HEADS UP: There are a ton of messages

	// ddt.on()

	// -------------------------------------------------------------------------------------

	/**
	* Initialize rich textarea plugin
	*
	* Currently it accepts one parameter which is an array of trigger objects.
	*
	* Each trigger object consists of:
	*
	*		trigger	a single character trigger. (e.g. #, @, ! etc)
	*
	*		callback	a callback function that accepts on parameter, a trigger word and returns
	*					a set of matches.
	*/
var shopify_sample_data=[
        { label: '<span class="ui-button ui-state-default ui-widget ui-corner-all ui-button-text-only ui-textarea-dropdown"> <span class="dropdown-shopify-img-span"><div class="shopify-img dropdown-img-size"></div></span> <span class="field-key">Email:</span> <span class="field-value">linktoramzan@gmail.com</span> </span>', value: { value: 'tag1', content: '<span contenteditable="false" data-value="tag1" class="ui-button ui-state-default ui-widget ui-corner-all ui-button-text-only field-text-parent"> <span class="shopify-img-span"><div class="shopify-img shopify-img-size"></div></span> <span class="field-key">Email:</span> <span class="field-value">linktoramzan@gmail.com</span> </span>'} },
        { label: '<span class="ui-button ui-state-default ui-widget ui-corner-all ui-button-text-only ui-textarea-dropdown"> <span class="dropdown-shopify-img-span"><div class="shopify-img dropdown-img-size"></div></span> <span class="field-key">First Name:</span> <span class="field-value">Test One</span> </span>', value: { value: 'tag2', content: '<span contenteditable="false" data-value="tag2" class="ui-button ui-state-default ui-widget ui-corner-all ui-button-text-only field-text-parent"> <span class="shopify-img-span"><div class="shopify-img shopify-img-size"></div></span> <span class="field-key">First name:</span> <span class="field-value">Test One</span> </span>' } },
        { label: '<span class="ui-button ui-state-default ui-widget ui-corner-all ui-button-text-only ui-textarea-dropdown"> <span class="dropdown-shopify-img-span"><div class="shopify-img dropdown-img-size"></div></span> <span class="field-key">Address:</span> <span class="field-value">Califonia</span> </span>', value: { value: 'tag3', content: '<span contenteditable="false" data-value="tag3" class="ui-button ui-state-default ui-widget ui-corner-all ui-button-text-only field-text-parent"> <span class="shopify-img-span"><div class="shopify-img shopify-img-size"></div></span> <span class="field-key">Address:</span> <span class="field-value">Califonia</span> </span>' } },
        { label: '<span class="ui-button ui-state-default ui-widget ui-corner-all ui-button-text-only ui-textarea-dropdown"> <span class="dropdown-shopify-img-span"><div class="shopify-img dropdown-img-size"></div></span> <span class="field-key">Phone:</span> <span class="field-value">+132-45582-487</span> </span>', value: { value: 'tag4', content: '<span contenteditable="false" data-value="tag4" class="ui-button ui-state-default ui-widget ui-corner-all ui-button-text-only field-text-parent"> <span class="shopify-img-span"><div class="shopify-img shopify-img-size"></div></span> <span class="field-key">Phone:</span> <span class="field-value">+13asd487</span> </span>' } },
        { label: '<span class="ui-button ui-state-default ui-widget ui-corner-all ui-button-text-only ui-textarea-dropdown"> <span class="dropdown-shopify-img-span"><div class="shopify-img dropdown-img-size"></div></span> <span class="field-key">Phone:</span> <span class="field-value">+132-45582-487</span> </span>', value: { value: 'tag5', content: '<span contenteditable="false" data-value="tag5" class="ui-button ui-state-default ui-widget ui-corner-all ui-button-text-only field-text-parent"> <span class="shopify-img-span"><div class="shopify-img shopify-img-size"></div></span> <span class="field-key">Phone:</span> <span class="field-value">+132-d82-487</span> </span>' } },
        { label: '<span class="ui-button ui-state-default ui-widget ui-corner-all ui-button-text-only ui-textarea-dropdown"> <span class="dropdown-shopify-img-span"><div class="shopify-img dropdown-img-size"></div></span> <span class="field-key">Phone:</span> <span class="field-value">+132-45582-487</span> </span>', value: { value: 'tag6', content: '<span contenteditable="false" data-value="tag6" class="ui-button ui-state-default ui-widget ui-corner-all ui-button-text-only field-text-parent"> <span class="shopify-img-span"><div class="shopify-img shopify-img-size"></div></span> <span class="field-key">Phone:</span> <span class="field-value">+132d82-487</span> </span>' } },
        { label: '<span class="ui-button ui-state-default ui-widget ui-corner-all ui-button-text-only ui-textarea-dropdown"> <span class="dropdown-shopify-img-span"><div class="shopify-img dropdown-img-size"></div></span> <span class="field-key">Phone:</span> <span class="field-value">+132-45582-487</span> </span>', value: { value: 'tag7', content: '<span contenteditable="false" data-value="tag7" class="ui-button ui-state-default ui-widget ui-corner-all ui-button-text-only field-text-parent"> <span class="shopify-img-span"><div class="shopify-img shopify-img-size"></div></span> <span class="field-key">Phone:</span> <span class="field-value">+13aasad-487</span> </span>' } }

    ];
	$( '.RICH_TEXTAREA' ).rich_textarea(
		{

		/**
		* trigger definitions.
		*
		* rich_textarea supports defining multiple trigger words each with their own
		* autocomplete data source callback
		*
		* It's an array of objects. Each object has keys:
		*
		*	trigger - the trigger character used to invoke the autocomplete
		*	callback - the callback to invoke once a trigger has been identified.
		*/

        shopify_sample_data:shopify_sample_data,
            placeholder: 'insert or Type',
        regexes: [

            /**
             * a beer smiley face replacement
             */

            {

                regex: "[]",

                callback: function( word_entry )
                {

                    console.log( "regex: got word_entry :" );
                    console.log(  word_entry );

                    $( '.RICH_TEXTAREA' ).rich_textarea( 'replaceWord', word_entry, '<span><img src="https://miles-by-motorcycle.com/static/rich_textarea/images/beer-drinking-smiley.gif"></span>', 'smiley' );

                }

            },

            /**
             * recognize and replace URL's.
             *
             * Could implement a Facebook/LinkedIn style URL querying ajax thing here.
             */

            {

                regex: /^((http|https):\/\/([\-\w]+\.)+\w{2,5}(\/[%\-\w]+(\.\w{2,})?)*(([\w\-\.\?\\/+@&#;`~=%!]*)(\.\w{2,})?)*\/?)$/i,

                callback: function( word_entry )
                {

                    console.log( "regex: got word entry:", word_entry );

                    $( '#RICH_TEXTAREA' ).rich_textarea( 'replaceWord', word_entry, '<span><a href="' + word_entry.word + '">' + word_entry.word + '</a>', word_entry.word );

                }

            },

            /**
             * replace any #tags that have not been selected from a dropdown.
             *
             * In a real application, one might like users to add tags dynamically and not restrict them
             * only to the tags that have already been defined. If the user does not select a tag from the
             * dropdown above, this will theme the tag.
             */

            {

                regex: "^#.+$",

                callback: function( word_entry )
                {

                    console.log( "got word_entry:", word_entry );

                    // the word will contain the # mark.

                    var word = word_entry.word.substring( 1 );

                    $( '#RICH_TEXTAREA' ).rich_textarea( 'replaceWord', word_entry, '<span class="ui-button ui-state-default ui-widget ui-corner-all ui-button-text-only">' + word + '</span>', '#' + word );

                }

            }

        ],
		triggers: [

			/**
			* first trigger entry
			*
			* Some sample tags.
			*/

			{
			trigger: '@',

			/**
			* generates autocomplete list for #tags
			*
			* @param {String} term #tag entered
			* @param {Function} response jquery ui autocomplete response callback.
			*
			* @see http://api.jqueryui.com/autocomplete/#option-source
			*/

			callback: function( term, response )
				{
				console.log( "@ callback with term '" + term + "'" );



				response( $.ui.autocomplete.filter( shopify_sample_data, term ) );

				}	// end of callback
			},

			/**
			* second trigger entry
			*/

			{

			/**
			* the trigger character
			*/

			trigger: '#',
  			
			/**
			* generates autocomplete list for @mention
			*
			* For demonstration purposes only. In a real application this method
			* would likely do some ajax call to a server to get the autocomplete list
			* based on the term provided. 
			*
			* @param {String} term @term entered 
			* @param {Function} response jquery ui autocomplete response callback.
			*
			* @see http://api.jqueryui.com/autocomplete/#option-source
			*/

			callback: function( term, response )
				{
				console.log( '@ callback' );

				var tags =
                    [
                        { label: '<img class="dropdown" src="https://miles-by-motorcycle.com/static/rich_textarea/images/Pirate_Flag_of_Jack_Rackham.svg.png">Calico Jack Rackham', value: { value: 'pirate1', content: '<span class="pirate"><a href="http://en.wikipedia.org/wiki/Calico_Jack_Rackham"><img class="inline" src="https://miles-by-motorcycle.com/static/rich_textarea/images/Pirate_Flag_of_Jack_Rackham.svg.png">Calico Jack Rackham</a></span>' } },
                        { label: '<img class="dropdown" src="https://miles-by-motorcycle.com/static/rich_textarea/images/Flag_of_Edward_England.svg.png">Edward England', value: { value: 'pirate2', content: '<span class="pirate"><a href="http://en.wikipedia.org/wiki/Edward_England"><img class="inline" src="https://miles-by-motorcycle.com/static/rich_textarea/images/Flag_of_Edward_England.svg.png">Edward England</a></span>' } },
                        { label: '<img class="dropdown" src="https://miles-by-motorcycle.com/static/rich_textarea/images/Pirate_Flag_of_Blackbeard_(Edward_Teach).svg.png">Blackbeard Edward Teach',	value: { value: 'pirate3', content: '<span class="pirate"><a href="http://en.wikipedia.org/wiki/Blackbeard"><img class="inline" src="https://miles-by-motorcycle.com/static/rich_textarea/images/Pirate_Flag_of_Blackbeard_(Edward_Teach).svg.png">BlackBeard (Edward Teach)</a></span>' } },
                        { label: '<img class="dropdown" src="https://miles-by-motorcycle.com/static/rich_textarea/images/120px-Bartholomew_Roberts_Flag.svg.png">Bartholomew Roberts', value: { value: 'pirate4', content: '<span class="pirate"><a href="http://en.wikipedia.org/wiki/Bartholomew_Roberts"><img class="inline" src="https://miles-by-motorcycle.com/static/rich_textarea/images/120px-Bartholomew_Roberts_Flag.svg.png">Bartholomew Roberts</a></span>' } }
                    ];

				response( $.ui.autocomplete.filter( tags, term ) );

				}	// end of callback

			}],
	
	});	// end of rich_textarea initialization


    // button to get contents

    $( '#button' ).bind( 'click', function( event )
    {
        $( '#output' ).val( $( '#RICH_TEXTAREA' ).rich_textarea( 'getTextContent' ) );
    });

	</script>

</body>
</html>


